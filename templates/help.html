{% extends "base.html" %}

{% block title %}Bantuan - Sistem Prediksi Kredit{% endblock %}

{% block content %}
<div class="space-y-6 fade-in max-w-5xl">
    <!-- Page Header -->
    <div class="card-android material-shadow p-6 bg-gradient-to-r from-primary to-purple-600 text-white">
        <div class="flex items-center space-x-3">
            <div class="bg-white p-3 rounded-lg">
                <i class="fas fa-question-circle text-primary text-2xl"></i>
            </div>
            <div>
                <h2 class="text-2xl font-bold">Pusat Bantuan</h2>
                <p class="text-purple-100">Panduan lengkap penggunaan sistem prediksi kredit</p>
            </div>
        </div>
    </div>

    <!-- Quick Start Guide -->
    <div class="card-android material-shadow p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-rocket text-primary mr-2"></i>
            Panduan Cepat
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border-2 border-blue-200">
                <div class="bg-blue-500 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                    <span class="text-white font-bold text-xl">1</span>
                </div>
                <h4 class="font-bold text-blue-900 mb-2">Isi Form Prediksi</h4>
                <p class="text-sm text-blue-700">Masukkan data pemohon kredit di halaman prediksi</p>
            </div>
            <div class="p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border-2 border-green-200">
                <div class="bg-green-500 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                    <span class="text-white font-bold text-xl">2</span>
                </div>
                <h4 class="font-bold text-green-900 mb-2">Dapatkan Hasil</h4>
                <p class="text-sm text-green-700">Sistem akan menganalisis dan memberikan prediksi</p>
            </div>
            <div class="p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border-2 border-purple-200">
                <div class="bg-purple-500 w-12 h-12 rounded-full flex items-center justify-center mb-4">
                    <span class="text-white font-bold text-xl">3</span>
                </div>
                <h4 class="font-bold text-purple-900 mb-2">Analisis Data</h4>
                <p class="text-sm text-purple-700">Lihat riwayat dan analitik di dashboard</p>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="card-android material-shadow p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-question text-primary mr-2"></i>
            Pertanyaan Umum (FAQ)
        </h3>
        <div class="space-y-3">
            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(1)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Apa itu NPL Predictor?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-1"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-1">
                    <p class="text-gray-700">NPL Predictor adalah sistem prediksi kredit berbasis Machine Learning yang
                        menggunakan algoritma Random Forest untuk memprediksi kemungkinan kredit macet (Non-Performing
                        Loan). Sistem ini menganalisis berbagai faktor seperti data pribadi, informasi kredit, dan hasil
                        prescreening untuk memberikan prediksi yang akurat.</p>
                </div>
            </div>

            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(2)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Bagaimana cara membuat prediksi baru?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-2"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-2">
                    <p class="text-gray-700 mb-2">Untuk membuat prediksi baru:</p>
                    <ol class="list-decimal list-inside space-y-1 text-gray-700">
                        <li>Klik menu "Prediksi Kredit" atau tombol FAB (+) di pojok kanan bawah</li>
                        <li>Isi semua data yang diperlukan di form (3 langkah)</li>
                        <li>Pastikan semua field yang wajib (*) sudah terisi</li>
                        <li>Klik tombol "Analisis Sekarang"</li>
                        <li>Sistem akan menampilkan hasil prediksi dalam beberapa detik</li>
                    </ol>
                </div>
            </div>

            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(3)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Apa arti dari tingkat risiko?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-3"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-3">
                    <p class="text-gray-700 mb-2">Tingkat risiko menunjukkan probabilitas kredit macet:</p>
                    <ul class="space-y-2">
                        <li class="flex items-center space-x-2">
                            <span
                                class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Sangat
                                Rendah</span>
                            <span class="text-sm text-gray-700">
                                < 20% probabilitas macet</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span
                                class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold">Rendah</span>
                            <span class="text-sm text-gray-700">20-40% probabilitas macet</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span
                                class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold">Sedang</span>
                            <span class="text-sm text-gray-700">40-60% probabilitas macet</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span
                                class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-semibold">Tinggi</span>
                            <span class="text-sm text-gray-700">60-80% probabilitas macet</span>
                        </li>
                        <li class="flex items-center space-x-2">
                            <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Sangat
                                Tinggi</span>
                            <span class="text-sm text-gray-700">> 80% probabilitas macet</span>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(4)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Bagaimana cara melihat riwayat prediksi?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-4"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-4">
                    <p class="text-gray-700">Klik menu "Riwayat" di sidebar untuk melihat semua prediksi yang pernah
                        dibuat. Anda dapat:</p>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 mt-2">
                        <li>Mencari berdasarkan pekerjaan atau produk</li>
                        <li>Filter berdasarkan status (Lancar/Tidak Lancar)</li>
                        <li>Mengurutkan data (terbaru, terlama, risiko)</li>
                        <li>Melihat detail lengkap setiap prediksi</li>
                        <li>Export data ke format CSV</li>
                        <li>Menghapus riwayat tertentu atau semua riwayat</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(5)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Seberapa akurat model prediksi ini?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-5"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-5">
                    <p class="text-gray-700 mb-2">Model ini memiliki performa sangat baik:</p>
                    <ul class="space-y-1 text-gray-700">
                        <li><strong>Akurasi:</strong> {{ (metadata.accuracy * 100)|round(1) }}%</li>
                        <li><strong>Precision:</strong> {{ (metadata.precision * 100)|round(1) }}%</li>
                        <li><strong>Recall:</strong> {{ (metadata.recall * 100)|round(1) }}%</li>
                        <li><strong>F1-Score:</strong> {{ (metadata.f1_score * 100)|round(1) }}%</li>
                    </ul>
                    <p class="text-gray-700 mt-2">Model dilatih menggunakan data riil dan algoritma Random Forest yang
                        telah terbukti handal.</p>
                </div>
            </div>

            <div class="faq-item border-2 border-gray-200 rounded-lg overflow-hidden">
                <button onclick="toggleFaq(6)"
                    class="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left">
                    <h4 class="font-semibold text-gray-800">Apakah data saya aman?</h4>
                    <i class="fas fa-chevron-down text-gray-400 faq-icon" id="faq-icon-6"></i>
                </button>
                <div class="faq-content hidden p-4 bg-gray-50 border-t-2 border-gray-200" id="faq-content-6">
                    <p class="text-gray-700">Ya, data Anda aman. Semua prediksi disimpan secara lokal di browser Anda
                        menggunakan LocalStorage. Data tidak dikirim ke server eksternal dan hanya Anda yang dapat
                        mengaksesnya. Anda dapat menghapus data kapan saja melalui menu Riwayat atau Pengaturan.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Feature Guide -->
    <div class="card-android material-shadow p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-book text-primary mr-2"></i>
            Panduan Fitur
        </h3>
        <div class="space-y-4">
            <div class="flex items-start space-x-4 p-4 bg-blue-50 rounded-lg">
                <div class="bg-blue-500 p-3 rounded-lg text-white">
                    <i class="fas fa-home text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800 mb-1">Dashboard</h4>
                    <p class="text-sm text-gray-700">Halaman utama yang menampilkan ringkasan statistik, grafik tren,
                        performa model, dan prediksi terbaru.</p>
                </div>
            </div>

            <div class="flex items-start space-x-4 p-4 bg-green-50 rounded-lg">
                <div class="bg-green-500 p-3 rounded-lg text-white">
                    <i class="fas fa-calculator text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800 mb-1">Prediksi Kredit</h4>
                    <p class="text-sm text-gray-700">Form input untuk membuat prediksi baru dengan 3 tahap: Data
                        Pribadi, Info Kredit, dan Prescreening.</p>
                </div>
            </div>

            <div class="flex items-start space-x-4 p-4 bg-purple-50 rounded-lg">
                <div class="bg-purple-500 p-3 rounded-lg text-white">
                    <i class="fas fa-history text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800 mb-1">Riwayat</h4>
                    <p class="text-sm text-gray-700">Daftar lengkap semua prediksi dengan fitur pencarian, filter, dan
                        export data.</p>
                </div>
            </div>

            <div class="flex items-start space-x-4 p-4 bg-orange-50 rounded-lg">
                <div class="bg-orange-500 p-3 rounded-lg text-white">
                    <i class="fas fa-chart-bar text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800 mb-1">Analitik</h4>
                    <p class="text-sm text-gray-700">Visualisasi data mendalam dengan berbagai grafik dan statistik
                        detail.</p>
                </div>
            </div>

            <div class="flex items-start space-x-4 p-4 bg-teal-50 rounded-lg">
                <div class="bg-teal-500 p-3 rounded-lg text-white">
                    <i class="fas fa-info-circle text-xl"></i>
                </div>
                <div class="flex-1">
                    <h4 class="font-bold text-gray-800 mb-1">Tentang Model</h4>
                    <p class="text-sm text-gray-700">Informasi detail tentang model ML, fitur yang digunakan, dan
                        performa model.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Support -->
    <div class="card-android material-shadow p-6 bg-gradient-to-br from-primary to-purple-600 text-white">
        <h3 class="text-xl font-bold mb-4 flex items-center">
            <i class="fas fa-headset mr-2"></i>
            Butuh Bantuan Lebih Lanjut?
        </h3>
        <p class="text-purple-100 mb-6">Jika Anda memiliki pertanyaan atau mengalami masalah, jangan ragu untuk
            menghubungi kami.</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-lg">
                <i class="fas fa-envelope text-2xl mb-2"></i>
                <p class="text-sm font-semibold">Email</p>
                <p class="text-xs text-purple-200">support@nplpredictor.com</p>
            </div>
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-lg">
                <i class="fas fa-phone text-2xl mb-2"></i>
                <p class="text-sm font-semibold">Telepon</p>
                <p class="text-xs text-purple-200">+62 xxx-xxxx-xxxx</p>
            </div>
            <div class="bg-white/10 backdrop-blur-sm p-4 rounded-lg">
                <i class="fas fa-comments text-2xl mb-2"></i>
                <p class="text-sm font-semibold">Live Chat</p>
                <p class="text-xs text-purple-200">Senin - Jumat, 09:00-17:00</p>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts -->
    <div class="card-android material-shadow p-6">
        <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
            <i class="fas fa-keyboard text-primary mr-2"></i>
            Pintasan Keyboard
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-gray-700">Buka Menu</span>
                <kbd class="px-3 py-1 bg-gray-800 text-white rounded text-sm font-mono">Ctrl + M</kbd>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-gray-700">Prediksi Baru</span>
                <kbd class="px-3 py-1 bg-gray-800 text-white rounded text-sm font-mono">Ctrl + N</kbd>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-gray-700">Dashboard</span>
                <kbd class="px-3 py-1 bg-gray-800 text-white rounded text-sm font-mono">Ctrl + H</kbd>
            </div>
            <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                <span class="text-gray-700">Riwayat</span>
                <kbd class="px-3 py-1 bg-gray-800 text-white rounded text-sm font-mono">Ctrl + R</kbd>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function toggleFaq(id) {
        const content = document.getElementById(`faq-content-${id}`);
        const icon = document.getElementById(`faq-icon-${id}`);

        if (content.classList.contains('hidden')) {
            content.classList.remove('hidden');
            icon.classList.remove('fa-chevron-down');
            icon.classList.add('fa-chevron-up');
        } else {
            content.classList.add('hidden');
            icon.classList.remove('fa-chevron-up');
            icon.classList.add('fa-chevron-down');
        }
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', function (e) {
        if (e.ctrlKey) {
            switch (e.key) {
                case 'm':
                    e.preventDefault();
                    toggleSidebar();
                    break;
                case 'n':
                    e.preventDefault();
                    window.location.href = '/predict';
                    break;
                case 'h':
                    e.preventDefault();
                    window.location.href = '/';
                    break;
                case 'r':
                    e.preventDefault();
                    window.location.href = '/history';
                    break;
            }
        }
    });
</script>
{% endblock %}